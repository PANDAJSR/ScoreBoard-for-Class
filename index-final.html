<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; font-src 'self' https://cdnjs.cloudflare.com; img-src 'self' data:;">
    <title>ScoreBoard</title>

    <!-- Font Awesome å›¾æ ‡å­—ä½“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="navigation-main.css">

    <style>
        /* æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘é‡ç»˜å’Œå›æµ */
        .nav-button, .student-item {
            will-change: transform;
            transform: translateZ(0);
        }

        /* ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ */
        .ripple {
            pointer-events: none;
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0);
            animation: ripple-animation 0.6s ease-out;
        }

        @keyframes ripple-animation {
            to {
                transform: scale(2);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- æ ‡é¢˜æ  -->
    <div class="title-bar" id="titleBar">
        <div class="title-text">ScoreBoard</div>
        <div class="window-controls">
            <button class="window-button minimize-btn" id="minimizeBtn" title="æœ€å°åŒ–">
                <i class="fas fa-window-minimize"></i>
            </button>
            <button class="window-button close-btn" id="closeBtn" title="å…³é—­">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
        <!-- å·¦ä¾§åŒºåŸŸ -->
        <div class="left-panel" id="leftPanel">
            <!-- å·¦ä¾§å¯¼èˆªæ ï¼ˆå›ºå®š60pxå®½ï¼‰ -->
            <div class="left-nav" id="leftNav">
                <div class="nav-content">
                    <div class="nav-buttons" id="navButtons">
                        <!-- é¦–å­—æ¯æŒ‰é’®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- å‚ç›´åˆ†å‰²çº¿ -->
        <div class="vertical-line" id="verticalLine"></div>

        <!-- å³ä¾§åŒºåŸŸ -->
        <div class="right-panel" id="rightPanel">
            <div class="panel-content">
                <div id="studentList" class="student-list">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ‘¥</div>
                        <div class="empty-message">ç‚¹å‡»å·¦ä¾§å­—æ¯æŒ‰é’®æŸ¥çœ‹å­¦ç”Ÿåˆ—è¡¨</div>
                        <div class="empty-hint">é€‰æ‹©ä¸Šæ–¹å­—æ¯æ¥æµè§ˆå­¦ç”Ÿ</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <div class="status-bar">
        <button class="class-button" id="classBtn" title="ç­çº§">
            <div class="class-button-content">
                <i class="fas fa-users"></i>
                <span class="class-name">é«˜äºŒ(3)ç­</span>
            </div>
        </button>
        <div class="status-spacer"></div>
        <button class="status-button settings-btn" id="settingsBtn" title="è®¾ç½®">
            <i class="fas fa-cog"></i>
        </button>
    </div>

    <!-- çª—å£è°ƒæ•´å¤§å°æ‰‹æŸ„ -->
    <div class="resize-handle resize-handle-bottom"></div>
    <div class="resize-handle resize-handle-right"></div>
    <div class="resize-handle resize-handle-bottom-right"></div>

    <!-- JavaScript æ–‡ä»¶ -->
    <script src="window-resize.js"></script>
    <script src="vertical-splitter.js"></script>
    <script src="navigation.js"></script>
    <script src="app.js"></script>

    <script>
        // å­¦ç”Ÿæ•°æ®
        const students = [
            'å¼ ä¸‰', 'æå››', 'ç‹äº”', 'èµµå…­', 'é’±ä¸ƒ', 'å­™å…«', 'æä¹', 'å‘¨å',
            'ç™½ä¸€', 'é™ˆäºŒ', 'ç¨‹ä¸‰', 'é‚“å››', 'å†¯äº”', 'é™ˆå…­', 'ç™½ä¸ƒ', 'ç¨‹å…«',
            'é»„ä¹', 'æ—å', 'éƒ‘ä¸€', 'ç‹äºŒ', 'å¼ ä¸‰', 'æå››', 'èµµäº”', 'é’±å…­',
            'å­™ä¸ƒ', 'æå…«', 'å‘¨ä¹', 'å´å', 'éƒ‘ä¸€', 'ç‹äºŒ', 'å†¯ä¸‰', 'é™ˆå››',
            'ç™½äº”', 'ç¨‹å…­', 'é‚“ä¸ƒ', 'é»„å…«', 'æ—ä¹', 'éƒ‘å', 'å†¯ä¸€', 'é™ˆäºŒ',
            'Ava', 'Bob', 'Carl', 'David', 'Emma', 'Frank', 'Grace', 'Henry'
        ];

        // æ‹¼éŸ³æ˜ å°„è¡¨
        const pinyinMap = {
            'å¼ ': 'zhang', 'æ': 'li', 'ç‹': 'wang', 'èµµ': 'zhao', 'é’±': 'qian',
            'å­™': 'sun', 'å‘¨': 'zhou', 'å´': 'wu', 'éƒ‘': 'zheng', 'å†¯': 'feng',
            'é™ˆ': 'chen', 'è¤š': 'chu', 'å«': 'wei', 'è’‹': 'jiang', 'æ²ˆ': 'shen',
            'éŸ©': 'han', 'æ¨': 'yang', 'æœ±': 'zhu', 'ç§¦': 'qin', 'å°¤': 'you',
            'è®¸': 'xu', 'ä½•': 'he', 'å•': 'lv', 'æ–½': 'shi', 'ç™½': 'bai',
            'ç¨‹': 'cheng', 'é‚“': 'deng', 'é»„': 'huang', 'æ—': 'lin', 'åˆ˜': 'liu',
            'å¾': 'xu', 'é©¬': 'ma', 'äº': 'yu', 'è‘£': 'dong', 'æ¢': 'liang',
            'è‚–': 'xiao', 'ç”°': 'tian', 'èƒ¡': 'hu', 'è¢': 'yuan', 'æ½˜': 'pan',
            'é™†': 'lu', 'é«˜': 'gao', 'éƒ­': 'guo', 'æ›¹': 'cao', 'å½­': 'peng',
            'æ›¾': 'zeng', 'è°¢': 'xie', 'è‹': 'su', 'å¢': 'lu', 'è’‹': 'jiang',
            'è”¡': 'cai', 'è´¾': 'jia', 'ä¸': 'ding', 'é­': 'wei', 'è–›': 'xue',
            'å¶': 'ye', 'é˜': 'yan', 'ä½™': 'yu'
        };

        const firstLetterMap = {
            'å¼ ': 'Z', 'æ': 'L', 'ç‹': 'W', 'èµµ': 'Z', 'é’±': 'Q',
            'å­™': 'S', 'å‘¨': 'Z', 'å´': 'W', 'éƒ‘': 'Z', 'å†¯': 'F',
            'é™ˆ': 'C', 'è¤š': 'C', 'å«': 'W', 'è’‹': 'J', 'æ²ˆ': 'S',
            'éŸ©': 'H', 'æ¨': 'Y', 'æœ±': 'Z', 'ç§¦': 'Q', 'å°¤': 'Y',
            'è®¸': 'X', 'ä½•': 'H', 'å•': 'L', 'æ–½': 'S', 'ç™½': 'B',
            'ç¨‹': 'C', 'é‚“': 'D', 'é»„': 'H', 'æ—': 'L', 'åˆ˜': 'L',
            'å¾': 'X', 'é©¬': 'M', 'äº': 'Y', 'è‘£': 'D', 'æ¢': 'L',
            'è‚–': 'X', 'ç”°': 'T', 'èƒ¡': 'H', 'è¢': 'Y', 'æ½˜': 'P',
            'é™†': 'L', 'é«˜': 'G', 'éƒ­': 'G', 'æ›¹': 'C', 'å½­': 'P',
            'æ›¾': 'Z', 'è°¢': 'X', 'è‹': 'S', 'å¢': 'L', 'è’‹': 'J',
            'è”¡': 'C', 'è´¾': 'J', 'ä¸': 'D', 'é­': 'W', 'è–›': 'X',
            'å¶': 'Y', 'é˜': 'Y', 'ä½™': 'Y'
        };

        // åŠŸèƒ½å‡½æ•°
        function getPinyin(text) {
            return pinyinMap[text] || text;
        }

        function getFirstLetters(names) {
            const letters = new Set();
            names.forEach(name => {
                if (/^[a-zA-Z]/.test(name)) {
                    letters.add(name[0].toUpperCase());
                } else if (/^[ä¸€-é¾¥]/.test(name)) {
                    const letter = firstLetterMap[name[0]] || '#';
                    letters.add(letter);
                } else {
                    letters.add('#');
                }
            });
            return Array.from(letters).sort();
        }

        function groupStudentsByLetter(names) {
            const groups = {};
            names.forEach(name => {
                let letter = '#';
                if (/^[a-zA-Z]/.test(name)) {
                    letter = name[0].toUpperCase();
                } else if (/^[ä¸€-é¾¥]/.test(name)) {
                    letter = firstLetterMap[name[0]] || '#';
                }
                if (!groups[letter]) groups[letter] = [];
                groups[letter].push(name);
            });
            return groups;
        }

        // åˆå§‹åŒ–å¯¼èˆªæŒ‰é’®
        function createNavButtons() {
            const letters = getFirstLetters(students);
            const container = document.getElementById('navButtons');
            if (!container) return;

            // ä½¿ç”¨DocumentFragmentå‡å°‘DOMæ“ä½œ
            const fragment = document.createDocumentFragment();

            letters.forEach(letter => {
                const button = document.createElement('button');
                button.className = 'nav-button';
                button.textContent = letter;
                button.setAttribute('data-letter', letter);
                button.setAttribute('title', `æ˜¾ç¤ºä»¥ ${letter} å¼€å¤´çš„å­¦ç”Ÿ`);
                button.addEventListener('click', () => handleLetterClick(letter));

                // æ°´æ³¢çº¹æ•ˆæœ
                button.addEventListener('mousedown', function(e) {
                    createRipple(this, e);
                });

                fragment.appendChild(button);
            });

            container.innerHTML = '';
            container.appendChild(fragment);

            // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªå­—æ¯
            if (letters.length > 0) {
                handleLetterClick(letters[0]);
            }
        }

        // å¤„ç†å­—æ¯ç‚¹å‡»
        function handleLetterClick(letter) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-letter="${letter}"]`).classList.add('active');

            // æ˜¾ç¤ºå­¦ç”Ÿåˆ—è¡¨
            displayStudents(letter);
        }

        // æ˜¾ç¤ºå­¦ç”Ÿåˆ—è¡¨
        function displayStudents(letter) {
            const groups = groupStudentsByLetter(students);
            const studentList = groups[letter] || [];
            const container = document.getElementById('studentList');
            if (!container) return;

            if (studentList.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ‘¥</div>
                        <div class="empty-message">æ²¡æœ‰æ‰¾åˆ°ä»¥ ${letter} å¼€å¤´çš„å­¦ç”Ÿ</div>
                        <div class="empty-hint">è¯·é€‰æ‹©å…¶ä»–å­—æ¯æˆ–æ·»åŠ å­¦ç”Ÿ</div>
                    </div>
                `;
                return;
            }

            const studentItems = studentList.map((student, index) => `
                <div class="student-item" data-student="${student}" data-index="${index}" onclick="handleStudentClick('${student}', this)">
                    <div class="student-name">${student}</div>
                    <div class="student-pinyin">${getPinyin(student)}</div>
                </div>
            `).join('');

            container.innerHTML = `
                <div class="students-header">
                    <h4>å­—æ¯ ${letter} çš„å­¦ç”Ÿ (${studentList.length}äºº)</h4>
                </div>
                <div class="students-container">
                    ${studentItems}
                </div>
            `;
        }

        // å¤„ç†å­¦ç”Ÿç‚¹å‡»
        function handleStudentClick(student, element) {
            // ç§»é™¤ä¹‹å‰çš„é€‰ä¸­çŠ¶æ€
            const prevSelected = document.querySelectorAll('.student-item.selected');
            prevSelected.forEach(item => item.classList.remove('selected'));

            // æ·»åŠ é€‰ä¸­çŠ¶æ€
            element.classList.add('selected');

            // å­¦ç”Ÿé€‰ä¸­å¤„ç†å®Œæˆ
        }

        // åˆ›å»ºæ°´æ³¢çº¹æ•ˆæœ
        function createRipple(button, event) {
            const ripple = document.createElement('span');
            ripple.className = 'ripple';

            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;

            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';

            button.appendChild(ripple);

            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        // çª—å£æ§åˆ¶æŒ‰é’®äº‹ä»¶ç»‘å®š
        function bindWindowControls() {
            const minimizeBtn = document.getElementById('minimizeBtn');
            const closeBtn = document.getElementById('closeBtn');
            const settingsBtn = document.getElementById('settingsBtn');
            const classBtn = document.getElementById('classBtn');

            if (minimizeBtn) {
                minimizeBtn.addEventListener('mousedown', (e) => {
                    createRipple(minimizeBtn, e);
                });
                minimizeBtn.addEventListener('click', () => {
                    setTimeout(() => {
                        if (window.electronAPI && window.electronAPI.minimizeWindow) {
                            window.electronAPI.minimizeWindow();
                        }
                    }, 200);
                });
            }

            if (closeBtn) {
                closeBtn.addEventListener('mousedown', (e) => {
                    createRipple(closeBtn, e);
                });
                closeBtn.addEventListener('click', () => {
                    setTimeout(() => {
                        if (window.electronAPI && window.electronAPI.closeWindow) {
                            window.electronAPI.closeWindow();
                        }
                    }, 200);
                });
            }

            if (settingsBtn) {
                settingsBtn.addEventListener('mousedown', (e) => {
                    createRipple(settingsBtn, e);
                });
                settingsBtn.addEventListener('click', () => {
                    setTimeout(() => {
                        if (window.electronAPI && window.electronAPI.openSettings) {
                            window.electronAPI.openSettings();
                        }
                    }, 200);
                });
            }

            if (classBtn) {
                classBtn.addEventListener('mousedown', (e) => {
                    createRipple(classBtn, e);
                });
                classBtn.addEventListener('click', () => {
                    setTimeout(() => {
                        if (window.electronAPI && window.electronAPI.openClassManagement) {
                            window.electronAPI.openClassManagement({
                                width: 500,
                                height: 400,
                                frame: false,
                                resizable: false
                            });
                        }
                    }, 200);
                });
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        window.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–å¯¼èˆª
            createNavButtons();

            // ç»‘å®šçª—å£æ§åˆ¶æŒ‰é’®
            bindWindowControls();
        });
    </script>
</body>
</html>"file_path":"D:/Codeä»£ç /ScoreBoard-for-Class/index-final.html